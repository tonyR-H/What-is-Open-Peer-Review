/*! Booking_TripleItem_1a - v0.40.0 - 2015-01-22
* Copyright (c) 2015 ;*/var h=this,k=function(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&"undefined"==typeof a.call)return"object";return b},aa=function(a){var b=k(a);return"array"==b||"object"==b&&"number"==typeof a.length},m=function(a){return"string"==typeof a},ba=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b},ca=function(a){return a.call.apply(a.bind,arguments)},da=function(a,b){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,c),a.apply(b,d)}}return function(){return a.apply(b,arguments)}},n=function(){return n=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ca:da,n.apply(null,arguments)},p=function(a,b){var c=a.split("."),d=h;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b},q=function(a,b){function c(){}c.prototype=b.prototype,a.K=b.prototype,a.prototype=new c,a.R=function(a,c){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};Function.prototype.bind=Function.prototype.bind||function(a){if(1<arguments.length){var b=Array.prototype.slice.call(arguments,1);return b.unshift(this,a),n.apply(null,b)}return n(this,a)},p("ddab.layouts.utils.VersionInfo.VERSION","4.0");var r=function(a){if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))};q(r,Error),r.prototype.name="CustomError";var ea=function(a){for(var b=a.split("%s"),c="",d=Array.prototype.slice.call(arguments,1);d.length&&1<b.length;)c+=b.shift()+d.shift();return c+b.join("%s")},ma=function(a){return fa.test(a)?(-1!=a.indexOf("&")&&(a=a.replace(ga,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(ha,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(ia,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(ja,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(ka,"&#39;")),-1!=a.indexOf("\x00")&&(a=a.replace(la,"&#0;")),a):a},ga=/&/g,ha=/</g,ia=/>/g,ja=/"/g,ka=/'/g,la=/\x00/g,fa=/[\x00&<>"']/,s=function(a,b){return b>a?-1:a>b?1:0},na=function(a){return String(a).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})},oa=function(a){var b=m(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,c){return b+c.toUpperCase()})},t=function(a,b){b.unshift(a),r.call(this,ea.apply(null,b)),b.shift()};q(t,r),t.prototype.name="AssertionError";var u=function(a,b){if(!a){var c="Assertion failed";if(b)var c=c+(": "+b),d=Array.prototype.slice.call(arguments,2);throw new t(""+c,d||[])}},v=Array.prototype,pa=v.indexOf?function(a,b,c){return u(null!=a.length),v.indexOf.call(a,b,c)}:function(a,b,c){if(c=null==c?0:0>c?Math.max(0,a.length+c):c,m(a))return m(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},qa=v.forEach?function(a,b,c){u(null!=a.length),v.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=m(a)?a.split(""):a,f=0;d>f;f++)f in e&&b.call(c,e[f],f,a)},ra=function(a){var b=a.length;if(b>0){for(var c=Array(b),d=0;b>d;d++)c[d]=a[d];return c}return[]},w=function(a,b){this.x=void 0!==a?a:0,this.y=void 0!==b?b:0};w.prototype.toString=function(){return"("+this.x+", "+this.y+")"},w.prototype.floor=function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},w.prototype.round=function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this};var x=function(a,b){this.width=a,this.height=b};x.prototype.toString=function(){return"("+this.width+" x "+this.height+")"},x.prototype.floor=function(){return this.width=Math.floor(this.width),this.height=Math.floor(this.height),this},x.prototype.round=function(){return this.width=Math.round(this.width),this.height=Math.round(this.height),this};var sa=function(a,b){for(var c in a)b.call(void 0,a[c],c,a)},ta="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),y=function(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<ta.length;e++)b=ta[e],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}},z;a:{var ua=h.navigator;if(ua){var va=ua.userAgent;if(va){z=va;break a}}z=""}var A=function(a){return-1!=z.indexOf(a)},B=A("Opera")||A("OPR"),C=A("Trident")||A("MSIE"),D=A("Gecko")&&-1==z.toLowerCase().indexOf("webkit")&&!(A("Trident")||A("MSIE")),E=-1!=z.toLowerCase().indexOf("webkit"),wa=function(){var a=h.document;return a?a.documentMode:void 0},xa=function(){var a,b="";return B&&h.opera?(b=h.opera.version,"function"==k(b)?b():b):(D?a=/rv\:([^\);]+)(\)|;)/:C?a=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:E&&(a=/WebKit\/(\S+)/),a&&(b=(b=a.exec(z))?b[1]:""),C&&(a=wa(),a>parseFloat(b))?String(a):b)}(),ya={},F=function(a){var b;if(!(b=ya[a])){b=0;for(var c=String(xa).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&e>f;f++){var g=c[f]||"",h=d[f]||"",i=RegExp("(\\d*)(\\D*)","g"),j=RegExp("(\\d*)(\\D*)","g");do{var k=i.exec(g)||["","",""],l=j.exec(h)||["","",""];if(0==k[0].length&&0==l[0].length)break;b=s(0==k[1].length?0:parseInt(k[1],10),0==l[1].length?0:parseInt(l[1],10))||s(0==k[2].length,0==l[2].length)||s(k[2],l[2])}while(0==b)}b=ya[a]=b>=0}return b},za=h.document,G=za&&C?wa()||("CSS1Compat"==za.compatMode?parseInt(xa,10):5):void 0,Aa=!C||C&&G>=9;!D&&!C||C&&C&&G>=9||D&&F("1.9.1");var Ba=C&&!F("9"),Da=function(a,b){sa(b,function(b,c){"style"==c?a.style.cssText=b:"class"==c?a.className=b:"for"==c?a.htmlFor=b:c in Ca?a.setAttribute(Ca[c],b):0==c.lastIndexOf("aria-",0)||0==c.lastIndexOf("data-",0)?a.setAttribute(c,b):a[c]=b})},Ca={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"},Fa=function(){var a=arguments,b=document,c=a[0],d=a[1];if(!Aa&&d&&(d.name||d.type)){if(c=["<",c],d.name&&c.push(' name="',ma(d.name),'"'),d.type){c.push(' type="',ma(d.type),'"');var e={};y(e,d),delete e.type,d=e}c.push(">"),c=c.join("")}return c=b.createElement(c),d&&(m(d)?c.className=d:"array"==k(d)?c.className=d.join(" "):Da(c,d)),2<a.length&&Ea(b,c,a),c},Ea=function(a,b,c){function d(c){c&&b.appendChild(m(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];if(!aa(f)||ba(f)&&0<f.nodeType)d(f);else{var g;a:{if(f&&"number"==typeof f.length){if(ba(f)){g="function"==typeof f.item||"string"==typeof f.item;break a}if("function"==k(f)){g="function"==typeof f.item;break a}}g=!1}qa(g?ra(f):f,d)}}},Ga=function(a){for(var b;b=a.firstChild;)a.removeChild(b)},Ha=function(a){return u(a,"Node cannot be null or undefined."),9==a.nodeType?a:a.ownerDocument||a.document},Ia={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Ja={IMG:" ",BR:"\n"},La=function(a){if(Ba&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Ka(a,b,!0),a=b.join("")}return a=a.replace(/ \xAD /g," ").replace(/\xAD/g,""),a=a.replace(/\u200B/g,""),Ba||(a=a.replace(/ +/g," "))," "!=a&&(a=a.replace(/^\s*/,"")),a},Ka=function(a,b,c){if(!(a.nodeName in Ia))if(3==a.nodeType)b.push(c?String(a.nodeValue).replace(/(\r\n|\r|\n)/g,""):a.nodeValue);else if(a.nodeName in Ja)b.push(Ja[a.nodeName]);else for(a=a.firstChild;a;)Ka(a,b,c),a=a.nextSibling},Ma=function(a){return Ma[" "](a),a};Ma[" "]=function(){};var Na=!C||C&&G>=9,Oa=C&&!F("9");!E||F("528"),D&&F("1.9b")||C&&F("8")||B&&F("9.5")||E&&F("528"),D&&!F("8")||C&&F("9");var Pa=function(){this.C=this.C,this.L=this.L};Pa.prototype.C=!1;var H=function(a,b){this.type=a,this.currentTarget=this.target=b,this.defaultPrevented=this.g=!1,this.s=!0};H.prototype.preventDefault=function(){this.defaultPrevented=!0,this.s=!1};var I=function(a,b){if(H.call(this,a?a.type:""),this.relatedTarget=this.currentTarget=this.target=null,this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0,this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.D=this.state=null,a){var c=this.type=a.type;this.target=a.target||a.srcElement,this.currentTarget=b;var d=a.relatedTarget;if(d){if(D){var e;a:{try{Ma(d.nodeName),e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d,this.offsetX=E||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=E||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0,this.button=a.button,this.keyCode=a.keyCode||0,this.charCode=a.charCode||("keypress"==c?a.keyCode:0),this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.state=a.state,this.D=a,a.defaultPrevented&&this.preventDefault()}};q(I,H),I.prototype.preventDefault=function(){I.K.preventDefault.call(this);var a=this.D;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Oa)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(b){}};var L="closure_listenable_"+(1e6*Math.random()|0),Qa=0,Ra=function(a,b,c,d,e){this.e=a,this.m=null,this.src=b,this.type=c,this.j=!!d,this.l=e,this.key=++Qa,this.f=this.k=!1},Sa=function(a){a.f=!0,a.e=null,a.m=null,a.src=null,a.l=null},M=function(a){this.src=a,this.b={},this.n=0};M.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.b[f],a||(a=this.b[f]=[],this.n++);var g=Ta(a,b,d,e);return g>-1?(b=a[g],c||(b.k=!1)):(b=new Ra(b,this.src,f,!!d,e),b.k=c,a.push(b)),b},M.prototype.remove=function(a,b,c,d){if(a=a.toString(),!(a in this.b))return!1;var e=this.b[a];return b=Ta(e,b,c,d),b>-1?(Sa(e[b]),u(null!=e.length),v.splice.call(e,b,1),0==e.length&&(delete this.b[a],this.n--),!0):!1};var Ua=function(a,b){var c=b.type;if(c in a.b){var d,e=a.b[c],f=pa(e,b);(d=f>=0)&&(u(null!=e.length),v.splice.call(e,f,1)),d&&(Sa(b),0==a.b[c].length&&(delete a.b[c],a.n--))}};M.prototype.r=function(a,b,c,d){a=this.b[a.toString()];var e=-1;return a&&(e=Ta(a,b,c,d)),e>-1?a[e]:null};var Ta=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.f&&f.e==b&&f.j==!!c&&f.l==d)return e}return-1},Va="closure_lm_"+(1e6*Math.random()|0),Wa={},Xa=0,Ya=function(a,b,c,d,e){if("array"==k(b))for(var f=0;f<b.length;f++)Ya(a,b[f],c,d,e);else if(c=Za(c),a&&a[L])f=c,$a(a),a.d.add(String(b),f,!1,d,e);else{if(!b)throw Error("Invalid event type");var f=!!d,g=N(a);g||(a[Va]=g=new M(a)),d=g.add(b,c,!1,d,e),d.m||(e=ab(),d.m=e,e.src=a,e.e=d,a.addEventListener?a.addEventListener(b.toString(),e,f):a.attachEvent(bb(b.toString()),e),Xa++)}},ab=function(){var a=cb,b=Na?function(c){return a.call(b.src,b.e,c)}:function(c){return c=a.call(b.src,b.e,c),c?void 0:c};return b},db=function(a,b,c,d,e){if("array"==k(b))for(var f=0;f<b.length;f++)db(a,b[f],c,d,e);else c=Za(c),a&&a[L]?a.d.remove(String(b),c,d,e):a&&(a=N(a))&&(b=a.r(b,c,!!d,e))&&eb(b)},eb=function(a){if("number"!=typeof a&&a&&!a.f){var b=a.src;if(b&&b[L])Ua(b.d,a);else{var c=a.type,d=a.m;b.removeEventListener?b.removeEventListener(c,d,a.j):b.detachEvent&&b.detachEvent(bb(c),d),Xa--,(c=N(b))?(Ua(c,a),0==c.n&&(c.src=null,b[Va]=null)):Sa(a)}}},bb=function(a){return a in Wa?Wa[a]:Wa[a]="on"+a},gb=function(a,b,c,d){var e=1;if((a=N(a))&&(b=a.b[b.toString()]))for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.j==c&&!f.f&&(e&=!1!==fb(f,d))}return Boolean(e)},fb=function(a,b){var c=a.e,d=a.l||a.src;return a.k&&eb(a),c.call(d,b)},hb=function(a,b){u(!(!a||!a[L]),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."),a.dispatchEvent(b)},cb=function(a,b){if(a.f)return!0;if(!Na){var c;if(!(c=b))a:{c=["window","event"];for(var d,e=h;d=c.shift();){if(null==e[d]){c=null;break a}e=e[d]}c=e}if(d=c,c=new I(d,this),e=!0,!(0>d.keyCode||void 0!=d.returnValue)){a:{var f=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){f=!0}(f||void 0==d.returnValue)&&(d.returnValue=!0)}for(d=[],f=c.currentTarget;f;f=f.parentNode)d.push(f);for(var f=a.type,i=d.length-1;!c.g&&i>=0;i--)c.currentTarget=d[i],e&=gb(d[i],f,!0,c);for(i=0;!c.g&&i<d.length;i++)c.currentTarget=d[i],e&=gb(d[i],f,!1,c)}return e}return fb(a,new I(b,this))},N=function(a){return a=a[Va],a instanceof M?a:null},ib="__closure_events_fn_"+(1e9*Math.random()>>>0),Za=function(a){return u(a,"Listener can not be null."),"function"==k(a)?a:(u(a.handleEvent,"An object listener must have handleEvent method."),a[ib]||(a[ib]=function(b){return a.handleEvent(b)}),a[ib])},O=function(){Pa.call(this),this.d=new M(this),this.J=this,this.B=null};q(O,Pa),O.prototype[L]=!0,O.prototype.addEventListener=function(a,b,c,d){Ya(this,a,b,c,d)},O.prototype.removeEventListener=function(a,b,c,d){db(this,a,b,c,d)},O.prototype.dispatchEvent=function(a){$a(this);var b,c=this.B;if(c){b=[];for(var d=1;c;c=c.B)b.push(c),u(1e3>++d,"infinite loop")}if(c=this.J,d=a.type||a,m(a))a=new H(a,c);else if(a instanceof H)a.target=a.target||c;else{var e=a;a=new H(d,c),y(a,e)}var f,e=!0;if(b)for(var g=b.length-1;!a.g&&g>=0;g--)f=a.currentTarget=b[g],e=P(f,d,!0,a)&&e;if(a.g||(f=a.currentTarget=c,e=P(f,d,!0,a)&&e,a.g||(e=P(f,d,!1,a)&&e)),b)for(g=0;!a.g&&g<b.length;g++)f=a.currentTarget=b[g],e=P(f,d,!1,a)&&e;return e};var P=function(a,b,c,d){if(b=a.d.b[String(b)],!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.f&&g.j==c){var h=g.e,i=g.l||g.src;g.k&&Ua(a.d,g),e=!1!==h.call(i,d)&&e}}return e&&0!=d.s};O.prototype.r=function(a,b,c,d){return this.d.r(String(a),b,c,d)};var $a=function(a){u(a.d,"Event target is not initialized. Did you call the superclass (goog.events.EventTarget) constructor?")},Q=function(a,b,c,d){this.top=a,this.right=b,this.bottom=c,this.left=d};Q.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"},Q.prototype.floor=function(){return this.top=Math.floor(this.top),this.right=Math.floor(this.right),this.bottom=Math.floor(this.bottom),this.left=Math.floor(this.left),this},Q.prototype.round=function(){return this.top=Math.round(this.top),this.right=Math.round(this.right),this.bottom=Math.round(this.bottom),this.left=Math.round(this.left),this};var R=function(a,b,c){if(m(b))(b=jb(a,b))&&(a.style[b]=c);else for(var d in b){c=a;var e=b[d],f=jb(c,d);f&&(c.style[f]=e)}},jb=function(a,b){var c=na(b);if(void 0===a.style[c]){var d=(E?"Webkit":D?"Moz":C?"ms":B?"O":null)+oa(c);if(void 0!==a.style[d])return d}return c},S=function(a,b){var c=Ha(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""},kb=function(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left,a.style.left=b;var e=a.style.pixelLeft;return a.style.left=c,a.runtimeStyle.left=d,e},T=function(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?kb(a,c):0},U=function(a,b){if(C){var c=T(a,b+"Left"),d=T(a,b+"Right"),e=T(a,b+"Top"),f=T(a,b+"Bottom");return new Q(e,d,f,c)}return c=S(a,b+"Left"),d=S(a,b+"Right"),e=S(a,b+"Top"),f=S(a,b+"Bottom"),new Q(parseFloat(e),parseFloat(d),parseFloat(f),parseFloat(c))},mb={thin:2,medium:4,thick:6},V=function(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in mb?mb[c]:kb(a,c)},nb=function(a){if(C&&!(C&&G>=9)){var b=V(a,"borderLeft"),c=V(a,"borderRight"),d=V(a,"borderTop");return a=V(a,"borderBottom"),new Q(d,c,a,b)}return b=S(a,"borderLeftWidth"),c=S(a,"borderRightWidth"),d=S(a,"borderTopWidth"),a=S(a,"borderBottomWidth"),new Q(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))},W=function(a,b,c,d){O.call(this),this.i=a,this.H=b,this.I=c,this.G=d,this.c=null,this.A=new x(0,0),ob(this)};q(W,O),p("ddab.layouts.utils.DynamicImageFit",W),W.addEventListener=W.prototype.addEventListener,W.removeEventListener=W.prototype.removeEventListener,W.prototype.M=function(){return this.c},W.prototype.getImage=W.prototype.M;var ob=function(a){R(a.i,"overflow","hidden"),a.c=document.createElement("img"),R(a.c,"position","inherit"),a.c.onload=n(function(){this.A=new x(this.c.width,this.c.height);var a,b=new x(this.i.clientWidth,this.i.clientHeight),c=this.A;if(a=this.I,"none"==a||"shrink_to_fit"==a&&c.width<=b.width&&c.height<=b.height)a=c;else{var c=c.width/c.height,d=b.width/b.height;a="fit"==a&&c>d||"fill"==a&&d>c||"shrink_to_fit"==a&&c>d?new x(Math.floor(b.width),Math.floor(b.width/c)):new x(Math.floor(b.height*c),Math.floor(b.height))}var c=a,d=this.G,e=new w((b.width-c.width)/2,(b.height-c.height)/2);"center"!=d&&(("top"==d||"top_left"==d||"top_right"==d)&&(e.y=0),("bottom"==d||"bottom_left"==d||"bottom_right"==d)&&(e.y=b.height-c.height),("left"==d||"top_left"==d||"bottom_left"==d)&&(e.x=0),("right"==d||"top_right"==d||"bottom_right"==d)&&(e.x=b.width-c.width)),this.c.width=a.width,this.c.height=a.height,R(this.c,"left",e.x+"px"),R(this.c,"top",e.y+"px"),Ga(this.i),this.i.appendChild(this.c),hb(this,"image_load")},a),a.c.src=a.H};p("ddab.layouts.utils.simpleUnicode.CharacterSet",{S:"cjk"});var qb=function(a,b){var c;switch(b){case"cjk":c=pb}return c?c.test(a):!1};p("ddab.layouts.utils.simpleUnicode.matchesCharacterSet",qb);for(var rb=[/\u3000-\u303f/,/\u3040-\u309f/,/\u30a0-\u30ff/,/\uff00-\uffef/,/\u4e00-\u9fff/,/\u3400-\u4dff/,/\uf900-\ufaff/,/\uac00-\ud7a3/],sb="",tb=0,ub=rb.length;ub>tb;tb++)sb+=rb[tb].source;var pb=new RegExp("["+sb+"]");p("ddab.layouts.utils.simpleUnicode.CJK_REGEXP",pb);var X=function(a,b,c,d){O.call(this),this.a=a,this.v=!1,this.h=b,a=this.a,b=U(a,"padding");var e=nb(a),f=a.style.maxWidth,f=(f?parseInt(f,10):a.getBoundingClientRect().width)-e.left-b.left-b.right-e.right;a=a.getBoundingClientRect().height-e.top-b.top-b.bottom-e.bottom,a=new x(f,a),this.p=a.width,this.t=a.height,this.o=0,this.u=c,this.F=d,c=parseInt(S(this.a,"fontSize"),10),R(this.a,"overflow","hidden"),(isNaN(c)||c<this.h)&&R(this.a,"font-size",this.h+"px"),this.u||R(this.a,"white-space","nowrap")};q(X,O),p("ddab.layouts.utils.DynamicTextFit",X),X.addEventListener=X.prototype.addEventListener,X.removeEventListener=X.prototype.removeEventListener;var vb=/\s+/,wb={display:"block",margin:0,overflow:"hidden",padding:0,position:"absolute",visibility:"hidden"},Y={q:"horizontal",w:"vertical"};X.prototype.P=function(){var a=Math.round(parseFloat(S(this.a,"fontSize"))),b=La(this.a).trim().split(vb);if(1!=b.length||!/^[\s\xa0]*$/.test(b[0])){if(a=xb(this,b,a,"vertical"),this.o=a=xb(this,b,a,"horizontal"),this.F){var a=this.o,c=b;if(!(a!=this.h||Z(this,c,a,Y.w)&&Z(this,c,a,Y.q)))if(c=yb(this,c,a,Y.w),c=yb(this,c,a,Y.q),1!=b.length||Z(this,c,a,Y.q,!0)?a=c.join(" ")+"…":(R(this.a,{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}),a=c.join(" ")),b=this.a,u(null!=b,"goog.dom.setTextContent expects a non-null value for node"),"textContent"in b)b.textContent=a;else if(3==b.nodeType)b.data=a;else if(b.firstChild&&3==b.firstChild.nodeType){for(;b.lastChild!=b.firstChild;)b.removeChild(b.lastChild);b.firstChild.data=a}else Ga(b),c=Ha(b),b.appendChild(c.createTextNode(String(a)))}hb(this,"textfit")}},X.prototype.scaleText=X.prototype.P,X.prototype.Q=function(a,b){var c=La(this.a);qb(c,b)&&(this.h=a)},X.prototype.setAlternateMinFontSize=X.prototype.Q,X.prototype.N=function(){return this.o},X.prototype.getScaledFontSize=X.prototype.N,X.prototype.O=function(){return this.v},X.prototype.isTruncated=X.prototype.O;var Z=function(a,b,c,d,e){e=Fa("div",null,b.join(" ")+(e?"…":"")),a.a.appendChild(e),b=b.length;var f=S(a.a,"lineHeight"),g={},g="vertical"==d?{fontSize:c+"px",lineHeight:/^[\s\xa0]*$/.test(f)?"normal":f,maxWidth:Math.floor(a.p)+"px"}:{fontSize:c+"px",height:a.t+"px",lineHeight:"normal"!=f?f:c+"px",maxWidth:Math.floor(a.p)+"px",overflow:"auto",whiteSpace:a.u&&b>1?"normal":"nowrap"};return y(g,wb),R(e,g),c=e.getBoundingClientRect(),a="vertical"==d?Number(a.t.toFixed(4))>=Number(c.height.toFixed(4)):e.scrollWidth<=a.p,e&&e.parentNode&&e.parentNode.removeChild(e),a},xb=function(a,b,c,d){for(;!Z(a,b,c,d)&&c>a.h;)c--,R(a.a,"font-size",c+"px");return c},yb=function(a,b,c,d){for(;1<b.length&&!Z(a,b,c,d,!0);)b.pop(),a.v=!0;return b};p("ddab.layouts.utils.styleUtils.getPaddingBox",function(a){return U(a,"padding")}),p("ddab.layouts.utils.styleUtils.getMarginBox",function(a){return U(a,"margin")});var zb=function(a){var b=U(a,"padding");return a=nb(a),new Q(b.top+a.top,b.right+a.right,b.bottom+a.bottom,b.left+a.left)};p("ddab.layouts.utils.styleUtils.getPaddingBorderBox",zb),p("ddab.layouts.utils.styleUtils.getBoundingClientRectContentSize",function(a){var b=a.getBoundingClientRect(),c=0,d=0;return b&&(a=zb(a),c=b.right-b.left-a.right-a.left,d=b.bottom-b.top-a.bottom-a.top),new x(c,d)});var TypeConvert=function(){function a(a){if(""==this)return null;a=b(a);var c,d,e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a),f=parseInt(e[1],16)/255,g=parseInt(e[2],16)/255,h=parseInt(e[3],16)/255,i=Math.max(f,g,h),j=Math.min(f,g,h),k=(i+j)/2;if(i===j)c=d=0;else{var l=i-j;switch(d=k>.5?l/(2-i-j):l/(i+j),i){case f:c=(g-h)/l+(h>g?6:0);break;case g:c=(h-f)/l+2;break;case h:c=(f-g)/l+4}c/=6}return{h:Math.floor(360*c),s:Math.floor(100*d),l:Math.floor(100*k)}}function b(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;return a.replace(b,function(a,b,c){return a+a+b+b+c+c})}return{toHSL:a,getFullHEXColor:b}}();String.prototype.toBoolean=function(){return"true"==this.toLowerCase()},String.prototype.toNumber=function(){return Number(this)},String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return"undefined"!=typeof a[c]?a[c]:b})},String.prototype.toColor=function(){var a=this;if(""===this)return null;if(-1!=this.indexOf("#")){var b=this.replace(/#/g,"0x");a=b}return"#"+a.split("0x").join("")},String.prototype.hexToRGBA=function(a){if(a="undefined"!=typeof a?a:1,""===this)return null;var b=TypeConvert.getFullHEXColor(this.toColor()),c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return c?"rgba("+parseInt(c[1],16)+","+parseInt(c[2],16)+","+parseInt(c[3],16)+","+a+")":null},String.prototype.changeBrightness=function(a){if(""==this)return null;for(var b,c=TypeConvert.getFullHEXColor(this.toColor()),d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c),e="",f=1;f<d.length;f++)b=parseInt(d[f],16),b+=b*a,e+=Math.round(Math.min(Math.max(0,b),255)),3!==f&&(e+=",");return e?"rgb("+e+")":null},String.prototype.changeHue=function(a){if(a=a||0,""==this)return null;var b=TypeConvert.toHSL(this.toColor());return b.h=Math.round(Math.min(Math.max(0,b.h+parseInt(a)),360)),"hsl("+b.h+", "+b.s+"%, "+b.l+"%)"},String.prototype.changeSaturationAndLightness=function(a,b){if(a=a||0,b=b||0,""==this)return null;var c=TypeConvert.toHSL(this.toColor());return c.s=Math.round(Math.min(Math.max(0,c.s+parseInt(a)),100)),c.l=Math.round(Math.min(Math.max(0,c.l+parseInt(b)),100)),"hsl("+c.h+", "+c.s+"%, "+c.l+"%)"},window.onAdData=function(a,b){layout.constant("DynamicData",a),layout.constant("ExitApi",b),angular.bootstrap(document,["layout"])};var DirectiveUtils=function(){function a(a,b){var c="logElementDetails: ";b&&(c+=b),c+=" "+a.className+": w = "+a.offsetWidth+",h = "+a.offsetHeight,c+="\n"+a.innerHTML}function b(a,b){var c=a.text(),d=document.createElement(b),d=angular.element(d);return d.text(c),a.html(""),!a.attr("multiline").toBoolean()&&a.attr("truncate").toBoolean()&&d.css({overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}),a.append(d),d}function c(a){{var b=a.attr("valign");a.attr("multiline")}if(b){var c=a[0].clientHeight+"px";a.addClass("inline-wrapper"),a.css({display:"table-cell","vertical-align":b,height:c})}}function d(a){a.css({overflow:"visible"})}return{logElementDetails:a,wrapText:b,showOverflow:d,vAlign:c}}();layout.directive("textFit",["$timeout","$rootScope",function(a,b){return{restrict:"AE",link:function(c,d,e){function f(){var a=new ddab.layouts.utils.DynamicTextFit(d[0],h&&h.toNumber(),i&&i.toBoolean(),j&&j.toBoolean()),c="undefined"!=typeof a.scaleText;c?(a.addEventListener("textfit",function(){var c={el:d,isTruncated:a.isTruncated(),scaledFontSize:a.getScaledFontSize(),doUniformSize:k,group:l};b.$emit(b.TEXTFIT_COMPLETE,c)}),a.scaleText()):g(!1),i&&i.toBoolean()||DirectiveUtils.vAlign(d)}function g(a){a?d.addClass("hide"):d.removeClass("hide")}var h=e.minfontsize,i=e.multiline,j=e.truncate,k=e.uniformsize&&e.uniformsize.toBoolean(),l=e.group||"default",m=!1;a(function(){k&&(g(!0),b.$emit(b.TEXTFIT_UNIFORMSIZE_ADDED,d,l),b.$on(b.TEXTFIT_UNIFORMSIZE_COMPLETE,function(a,b,c){m||(c&&c.group==l&&(d.css("font-size",b+"px"),m=!0),g(!1))})),c.preloaded?f():b.$on(b.PRELOADED,function(){f()})})}}}]),layout.directive("imageFit",["$timeout",function(a){return{restrict:"AE",scope:{scaletype:"@",aligntype:"@",loc:"@"},link:function(b,c){a(function(){new ddab.layouts.utils.DynamicImageFit(c[0],b.loc,b.scaletype,b.aligntype)})}}}]),layout.directive("dynamicStyle",["$timeout","$rootScope",function(a,b){return{restrict:"AE",link:function(c,d){a(function(){d.parent().append("<style>"+d.text()+"</style>"),d.text(""),b.$broadcast(b.STYLES_LOADED)})}}}]),layout.directive("noExit",function(){return{restrict:"AE",link:function(a,b){b.bind("click",function(a){a.stopPropagation(),a.preventDefault()})}}}),layout.directive("itemInteraction",["$rootScope",function(a){return{restrict:"AE",link:function(b,c,d){var e="itemInteraction";c.bind("mouseenter",function(){var c=b.$eval(d.itemInteraction);a.$broadcast(e+".update",c),b.$apply()}).bind("mouseleave",function(){a.$broadcast(e+".revert"),b.$apply()})}}}]),layout.service("DataHandler",["DynamicData",function(a){function b(){return a}function c(){return{products:d("Product"),headline:d("Headline")[0],design:d("Design")[0]}}function d(b){var c=a.google_template_data.adData[0],d=[];for(var e in c)if(c.hasOwnProperty(e)){var f=0===e.indexOf(b);if(f){var g=c[e],h=e.split("_"),i=h[1],j=h[2];d[i]=d[i]||{},d[i][j]=g}}return d}function e(a){if(a&&0!=a.length)for(var b=0;b<a.length;b++)a[b].index=b}function f(a,b){for(var c=a.length;c--&&c>b-1;)a.splice(c,1)}function g(b){var c="undefined"!=typeof b?b:h();return a.google_click_url+encodeURIComponent(c)}function h(){return a.destination_url}function i(a){return isNaN(a)?j():"Product_"+a+"_url"}function j(){return""}function k(){return a.link_target||"_top"}return{getDynamicData:b,getParsedAdData:c,cleanFeedItems:e,limitFeedItems:f,getExitUrl:g,getItemExitApiRef:i,getDefaultExitApiRef:j,getExitTarget:k}}]),layout.service("Utils",["$timeout",function(a){function b(b){var c=28e3,d=b.limit&&b.limit<c?b.limit:c,e=b.delay||1e3,f=Math.floor((d-e)/e),g=b.enableAutoCycleStop!==!1,h=0;!function i(){if(g!==!0||j!==!0){if(h>=f)return void(b.onFinish&&b.onFinish());b.interval&&h>0&&h%b.interval==0&&b.onInterval&&b.onInterval(),h>0&&b.onTick(),h++,a(i,e)}}()}function c(){j=!0}function d(a,b){var c=parseInt(a.slice(1),16),d=0>b?0:255,e=0>b?-1*b:b,f=c>>16,g=c>>8&255,h=255&c;return"#"+(16777216+65536*(Math.round((d-f)*e)+f)+256*(Math.round((d-g)*e)+g)+(Math.round((d-h)*e)+h)).toString(16).slice(1)}function e(a){if(a){var b=/(\.|\,)0{2}(?![\d])/;return a.replace(b,"")}}function f(a){var b=/[^0-9.,]/g,c=/,/g;return a=a.replace(b,""),a=a.replace(c,".")}function g(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];d.salePercentDiscount&&(d.formattedDiscount=h(d))}}function h(a){var b=a.salePercentDiscount;if(!b)return null;var c="-";return c+=parseInt(100*Number(b)),c+="%"}function i(a){var b=a.salePrice&&a.regularPrice&&""!=a.salePrice&&""!=a.regularPrice&&a.salePrice!=a.regularPrice;return b}var j=!1;return{shadeColor:d,autoCycle:b,autoCycleStop:c,removeCents:e,convertToNumber:f,setPriceDiscounts:g,salesPriceEnabled:i}}]),layout.service("StarRatings",[function(){function a(a,b){return b||(b=d),a[b]&&a[b]>=3}function b(a,b){if(b||(b=d),a[b]){for(var e=c(parseFloat(a[b])),f=e!==parseInt(e),g=[],h=0;5>h;h++)h<=Math.floor(e)-1?g.push("full"):h==Math.ceil(e)-1?f===!0&&g.push("half"):g.push("empty");a.stars=g}}function c(a){return a=Math.round(2*a)/2}var d="rating";return{addStars:b,isStarsShown:a}}]),layout.service("AnimSequence",["$timeout","$rootScope",function(a,b){function c(){j===!0||h>k||(h>0&&d(h),h++,a(c,i))}function d(a){b.$broadcast("AnimSequence.update",a)}function e(){c()}function f(){j=!0}function g(a){i=a}var h=0,i=100,j=!1,k=20;return{finish:f,start:e,setDelay:g}}]),layout.controller("LayoutCntrl",["$scope","$rootScope","$timeout","$sce","DataHandler","Utils","ExitApi",function(a,b,c,d,e,f,g){function h(){return a.fontsLoaded?a.enableDynamicStyles?void(a.stylesLoaded&&i()):void i():void 0}function i(){m||(m=!0,c(function(){a.preloaded=!0,b.$broadcast(b.PRELOADED)},300),c(function(){b.$broadcast("start"),a.showLayout=!0},1e3))}function j(){var b=a.headline&&a.headline.productClickOnly&&a.headline.productClickOnly.toBoolean()===!0;if(n||b){var c=a.getVisibleItems()[a.exitItemIndex];c||(c=a.getVisibleItems()[0]),a.exitUrl=c&&c.url?e.getExitUrl(c.url):e.getExitUrl(),a.exitApiRef=c&&void 0!=c.index?e.getItemExitApiRef(c.index):e.getExitUrl()}else a.exitUrl=e.getExitUrl(),a.exitApiRef=e.getDefaultExitApiRef()}function k(a){for(var b,c=0;c<a.sizes.length;c++)(!b||a.sizes[c]<b)&&(b=a.sizes[c]);return b}function l(a,c){c?b.$emit(b.TEXTFIT_UNIFORMSIZE_COMPLETE,a,c):b.$emit(b.TEXTFIT_UNIFORMSIZE_COMPLETE),clearTimeout(o)}!function(){var b=e.getParsedAdData();a.products=b.products,a.headline=b.headline,a.design=b.design,e.cleanFeedItems(a.products),c(function(){a.itemsLimit&&e.limitFeedItems(a.products,a.itemsLimit)}),f.setPriceDiscounts(a.products)}(),a.preloaded=!1,a.stylesLoaded=!1,a.fontsLoaded=!1,a.enableDynamicStyles=!1,b.FONTS_LOADED="fontsLoaded",b.FONTS_UNUSED="fontsUnused",b.STYLES_LOADED="stylesLoaded",b.PRELOADED="preloaded",b.$on(b.FONTS_LOADED,function(){a.webFonts,a.fontsLoaded=!0,h()}),b.$on(b.FONTS_UNUSED,function(){a.webFonts,a.fontsLoaded=!0,h()}),b.$on(b.STYLES_READY,function(){a.stylesLoaded=!0,h()});var m=!1;c(function(){"undefined"==typeof WebFont?b.$broadcast(b.FONTS_UNUSED):c(function(){if(!a.webFonts)throw new Error("webfont.js used, $scope.webFonts undefined");WebFont.load({google:{families:a.webFonts},timeout:2e3,active:function(){b.$broadcast(b.FONTS_LOADED)}})})}),a.setVisibleItems=function(b){a.visibleItems=b,a.resetUniformTextSizes()},a.getVisibleItems=function(){var b=a.products;return a.visibleItems&&a.visibleItems.length>0&&(b=a.visibleItems),b},a.setCurrentItemIndex=function(b){a.currentItemIndex=b,a.exitItemIndex=b,a.currentItem=a.getVisibleItems()[b],j()},a.setCurrentItemIndex(0),a.isCurrentItemIndex=function(b){return a.currentItemIndex==b},a.isCurrentItem=function(b){var c=a.products[b];return a.currentItem.$$hashKey==c.$$hashKey?!0:!1},a.setItemPrevious=function(){var b=a.currentItemIndex>0?a.currentItemIndex-1:a.getVisibleItems().length-1;a.setCurrentItemIndex(b)},a.setItemNext=function(){var b=a.currentItemIndex<a.getVisibleItems().length-1?a.currentItemIndex+1:0;a.setCurrentItemIndex(b)};var n=!1;a.exitTarget=e.getExitTarget(),b.$on("itemInteraction.update",function(b,c){n=!0,void 0!=c&&(a.exitItemIndex=c),j()}),b.$on("itemInteraction.revert",function(){n=!1,j()}),b.EXITED="exited",a.exit=function(){a.exitApiRef?g.exit(a.exitApiRef):g.exit(),a.autoCycleStop(),b.$broadcast(b.EXITED)},a.autoCycle=function(b){var c={};c.limit=b&&b.limit?b.limit:null,c.delay=b&&b.delay?b.delay:null,c.onTick=b&&b.onTick?b.onTick:a.setItemNext,c.onFinish=b&&b.onFinish?b.onFinish:function(){a.setCurrentItemIndex(0)
},c.interval=b&&b.interval?b.interval:a.getVisibleItems().length,c.onInterval=b&&b.onInterval?b.onInterval:null,c.enableAutoCycleStop=!0,f.autoCycle(c)},a.autoCycleStop=function(){f.autoCycleStop()},a.allowSalesPrice=function(b){var c=a.getVisibleItems()[b];return f.salesPriceEnabled(c)},a.shadeColor=f.shadeColor,a.renderHtml=function(a){return d.trustAsHtml(a)},b.TEXTFIT_COMPLETE="textfitComplete",b.TEXTFIT_UNIFORMSIZE_ADDED="textfitUniformsizeAdded",b.TEXTFIT_UNIFORMSIZE_COMPLETE="textfitUniformsizeComplete";var o,p={};b.$on(b.TEXTFIT_UNIFORMSIZE_ADDED,function(a,b,c){p[c]||(p[c]={els:[],sizes:[]}),0==b[0].innerText.length&&p[c].els.push(b)}),b.$on(b.TEXTFIT_COMPLETE,function(a,b){if(b.doUniformSize&&(o=setTimeout(function(){l()},2e3),p[b.group].sizes.push(b.scaledFontSize),p[b.group].sizes.length==p[b.group].els.length)){var c=k(p[b.group]);l(c,b)}}),a.resetUniformTextSizes=function(){p={},clearTimeout(o)}}]),layout.controller("CustomCntrl",["$scope","$controller","$timeout","Utils",function(a,b){angular.extend(this,b("LayoutCntrl",{$scope:a})),a.$on("start",function(){a.autoCycle({delay:2500})}),function(){for(var b=a.products.length;b--;)a.products[b].name||a.products.splice(b,1)}(),function(){function b(a){if(a.rating){var b=parseInt(a.rating);if(!(3>b)){for(var c=[],f=0;5>f;f++)c.push(b-1>=f?d:e);a.stars=c}}}for(var c="img/star_rating_",d=c+"full.png",e=c+"empty.png",f=0,g=a.products.length;g>f;f++)b(a.products[f])}()}]);